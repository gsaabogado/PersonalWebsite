---
import { getLangFromUrl, t } from "../../i18n/utils";
import SectionHeader from "../SectionHeader.astro";
import { researchAreas } from "../../data/research";

const lang = getLangFromUrl(Astro.url);
const basePath = lang === "es" ? "/es/research" : "/research";
---

<section class="relative py-24 px-4 overflow-hidden">
  <!-- Background image -->
  <div class="absolute inset-0">
    <img
      src="/images/backgrounds/world-lights.png"
      alt=""
      class="w-full h-full object-cover"
    />
    <div class="absolute inset-0 bg-slate-dark/90"></div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto">
    <SectionHeader
      label={t(lang, "research.label")}
      title={t(lang, "research.title")}
      subtitle={t(lang, "research.subtitle")}
      dark
    />

    <div class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-8">
      {researchAreas.map((area, i) => (
        <a
          href={`${basePath}/${area.id}/`}
          data-animate
          data-delay={`${0.1 + i * 0.15}s`}
          class="group bg-white/10 backdrop-blur-sm rounded-xl p-8 hover:bg-white/15 transition-all duration-300 border border-white/10 hover:border-white/25"
        >
          <!-- Icon -->
          <div class="w-14 h-14 bg-sky/20 rounded-xl flex items-center justify-center mb-6 group-hover:bg-sky/30 transition-colors">
            <svg class="w-7 h-7 text-sky-light" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d={area.icon} />
            </svg>
          </div>

          <h3 class="text-xl font-heading font-bold text-white mb-3">{lang === "es" && area.titleEs ? area.titleEs : area.title}</h3>
          <p class="text-white/55 leading-relaxed mb-4">{lang === "es" && area.shortDescriptionEs ? area.shortDescriptionEs : area.shortDescription}</p>

          <div class="flex items-center justify-between">
            <span class="text-sm text-white/35">{area.topics.length} {t(lang, "research.topics")}</span>
            <span class="text-sm font-medium text-sky-light group-hover:translate-x-1 transition-transform inline-flex items-center gap-1">
              {t(lang, "research.explore")}
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </span>
          </div>
        </a>
      ))}
    </div>
  </div>
</section>
